<div id="header" class="h-[50px] bg-cyan-500 flex">
  <div id="head-left" class="w-[250px] border-r-[1px] border-white h-full transition-all">
    <a href="/admin/transaction"
      class="flex gap-4 justify-center items-center text-white h-full font-bold cursor-pointer">
      <span class="max-w-[40px] max-h-[40px]">
        <img src="http://localhost:8080/img/logo/phonestore.png" alt="http://localhost:8080/img/logo/logo.svg">
      </span>
      <span id="header-logo">Phone store</span>
    </a>
  </div>
  <div class="flex justify-between flex-1 transition-all">
    <div id="btn-sidebar-action"
      class="text-white text-lg px-5 py-[15px] cursor-pointer flex justify-center items-center">
      <i class="fa-solid fa-bars"></i>
    </div>
    <div class="relative group inline-block min-w-[160px] mr-4">
      <a href="/auth/info/{{user._id}}"
        class="block min-w-[160px] px-3 py-[13px] hover:bg-opacity-60 hover:bg-slate-600 focus:outline-none focus:shadow-outline-gray group-hover:bg-slate-600 group-hover:bg-opacity-60">
        <i class="fa-solid fa-user-tie text-gray-500 font-lg"></i>
        <span id="cur-user-name" class="text-sm text-white ml-3 mr-1" data-role="{{user.role}}"></span>
        <i class="text-xs fa-solid fa-caret-down text-white group-hover:hidden"></i>
        <i class="text-xs fa-solid fa-caret-up hidden text-white group-hover:inline-block"></i>
      </a>
      <ul class="absolute hidden bg-white shadow-md text-gray-700 group-hover:block w-full">
        <li>
          <a href="/auth/info/edit" class="block px-4 py-2 text-sm hover:bg-gray-200">
            <i class="fa-solid fa-gear text-slate-500"></i>
            <span class="ml-3">Cài đặt</span>
          </a>
        </li>
        <li>
          <a href="/auth/change-password" class="block px-4 py-2 text-sm hover:bg-gray-200">
            <i class="fa-solid fa-rotate text-slate-500"></i>
            <span class="ml-3">Đổi mật khẩu</span>
          </a>
        </li>
        <li>
          <a href="/auth/logout" class="block px-4 py-2 text-sm hover:bg-gray-200">
            <i class="fa-solid fa-right-from-bracket text-slate-500"></i>
            <span class="ml-3">Đăng xuất</span>
          </a>
        </li>
      </ul>
    </div>

  </div>
</div>

<script>
  ///Call API
  getUserByJWT();
  function getUserByJWT() {
    fetch('/api/auth/userjwt', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
      }
    })
      .then(res => res.json())
      .then(data => {
        if (data.status === true) {
          const curUserName = document.querySelector('#cur-user-name');
          curUserName.textContent = data.data.name;
        }
      })
      .catch(err => console.log(err));
  }
</script>